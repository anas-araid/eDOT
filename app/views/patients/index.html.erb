<h1>Patients</h1>

<div id="filters">
  <%= render 'filter'%>
</div>
<div style = "overflow-x:auto;z-index:-1;">
  <table class = "sortable mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-color--cyan-50">
    <thead>
      <tr>
        <% ["ID", "Name", "Surname", "Address", "Health Center"].each do |col_name| %>
          <th class="mdl-data-table__cell--non-numeric mdl-color--teal-400 mdl-color-text--cyan-50"><%= col_name %></th>
        <% end %>
      </tr>
    </thead>

  <tbody>
    <% @patients.each do |patient| %>
      <tr>
        <% [patient.id, patient.name, patient.surname, patient.address, patient.health_center.name].each do |field| %>
          <td class="mdl-data-table__cell--non-numeric">
            <% field = "" if field.nil?%>
            <%= link_to field, patient %>
          </td>
        <% end %>
        </tr>
    <% end %>
  </tbody>
</table>
</div>
<br>

<div class="backdrop"></div>
<%= link_to "", :id => "floating-button-link",  :onclick => "toggle_filter_visibility('filters');return false;" do %>
  <div class="fab child mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored mdl-color--orange-500 mdl-color-text--cyan-50" data-subitem="2">
    <i class="material-icons">search</i>
  </div>
<%end%>

<%= link_to new_patient_path, :id => "floating-button-link" do %>
  <div class="fab child mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored mdl-color--pink-500 mdl-color-text--cyan-50" data-subitem="1">
    <i class="material-icons">add</i>
  </div>
<%end%>
  <div class="fab mdl-button mdl-js-button mdl-button--fab mdl-button--colored mdl-color--teal-400 mdl-color-text--cyan-50 bottom-right-fixed" id="masterfab">
    <i class="material-icons">settings</i>
  </div>
<script>
function toggle_filter_visibility(id) {

   var e = document.getElementById(id);
   if(e.style.display == 'block'){
      e.style.display = 'none';
   }else{
      e.style.display = 'block';
    }
}

function is_visible(id){
  var e = document.getElementById(id);
  window.alert(e);
  window.alert(e.style.display)
  if(e.style.display == 'block'){
     return true;
  }else{
     return false;
   }
}

$.ajax({
        url : "",
        type : "get",
        data : { data_value:  is_visible('filters')}
    });
</script>
